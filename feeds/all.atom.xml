<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>iakyi blog</title><link href="http://iakyi.github.io/" rel="alternate"></link><link href="http://iakyi.github.io/feeds/all.atom.xml" rel="self"></link><id>http://iakyi.github.io/</id><updated>2017-03-11T04:50:23+09:00</updated><entry><title>pelicanでブログカードを使いたい、それembedly-cardで出来るよ</title><link href="http://iakyi.github.io/pelicandeburogukadowoshi-itai-soreembedly-carddechu-lai-ruyo.html" rel="alternate"></link><published>2017-03-11T04:50:23+09:00</published><updated>2017-03-11T04:50:23+09:00</updated><author><name>iakyi</name></author><id>tag:iakyi.github.io,2017-03-11:/pelicandeburogukadowoshi-itai-soreembedly-carddechu-lai-ruyo.html</id><summary type="html">&lt;p&gt;ブログを書いてると、リンクはきれいに表示したいと言うのが、人の常だと思います。&lt;/p&gt;
&lt;p&gt;はてななんかだと、はてな記法で簡単にブログカードが出来るし、wordpressでも同じ。&lt;/p&gt;
&lt;a class='embedly-card' data-card-chrome='0' href='http://blog.muuny-blue.info/e38e37a99f7de1f45d169efcdb288dd1.html'&gt;&lt;/a&gt;
                &lt;script&gt;
                !function(a){
                    var b="embedly-platform",c="script";
                    if(!a.getElementById(b)){
                        var d=a.createElement(c);
                        d.id=b;
                        d.src=("https:"===document.location.protocol?"https":"http")+"://cdn.embedly.com/widgets/platform.js";
                        var e=document.getElementsByTagName(c)[0];e.parentNode.insertBefore(d,e …&lt;/script&gt;</summary><content type="html">&lt;p&gt;ブログを書いてると、リンクはきれいに表示したいと言うのが、人の常だと思います。&lt;/p&gt;
&lt;p&gt;はてななんかだと、はてな記法で簡単にブログカードが出来るし、wordpressでも同じ。&lt;/p&gt;
&lt;a class='embedly-card' data-card-chrome='0' href='http://blog.muuny-blue.info/e38e37a99f7de1f45d169efcdb288dd1.html'&gt;&lt;/a&gt;
                &lt;script&gt;
                !function(a){
                    var b="embedly-platform",c="script";
                    if(!a.getElementById(b)){
                        var d=a.createElement(c);
                        d.id=b;
                        d.src=("https:"===document.location.protocol?"https":"http")+"://cdn.embedly.com/widgets/platform.js";
                        var e=document.getElementsByTagName(c)[0];e.parentNode.insertBefore(d,e)}
                    }(document);
                &lt;/script&gt;
                &lt;p&gt;これを使えば、pelicanでも簡単に出来るみたいだけど、それはそれ markdown を使っているのが前提。&lt;/p&gt;
&lt;a class='embedly-card' data-card-chrome='0' href='https://nelog.jp/embedly'&gt;&lt;/a&gt;
                &lt;script&gt;
                !function(a){
                    var b="embedly-platform",c="script";
                    if(!a.getElementById(b)){
                        var d=a.createElement(c);
                        d.id=b;
                        d.src=("https:"===document.location.protocol?"https":"http")+"://cdn.embedly.com/widgets/platform.js";
                        var e=document.getElementsByTagName(c)[0];e.parentNode.insertBefore(d,e)}
                    }(document);
                &lt;/script&gt;
                &lt;p&gt;こちらによれば、chrome拡張を使えば生のhtmlを発行してくれるみたいだけど、ちょっと面倒。&lt;/p&gt;
&lt;p&gt;で、pelicanでrestructuredtextでブログカードとなれば、これ使うしかない。&lt;/p&gt;
&lt;a class='embedly-card' data-card-chrome='0' href='https://github.com/josh146/embedly_cards'&gt;&lt;/a&gt;
                &lt;script&gt;
                !function(a){
                    var b="embedly-platform",c="script";
                    if(!a.getElementById(b)){
                        var d=a.createElement(c);
                        d.id=b;
                        d.src=("https:"===document.location.protocol?"https":"http")+"://cdn.embedly.com/widgets/platform.js";
                        var e=document.getElementsByTagName(c)[0];e.parentNode.insertBefore(d,e)}
                    }(document);
                &lt;/script&gt;
                &lt;p&gt;ただ、pelicanの3.7.1では、エラーが出てうまく行かなかったので、以下の通り書き換えた。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;span class="gh"&gt;diff --git a/embedly_cards/card_rst.py b/embedly_cards/card_rst.py&lt;/span&gt;
&lt;span class="gh"&gt;index 7dc6271..071de73 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/embedly_cards/card_rst.py&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/embedly_cards/card_rst.py&lt;/span&gt;
&lt;span class="gu"&gt;@@ -48,5 +48,5 @@ def content_object_init(instance):&lt;/span&gt;
     directives.register_directive(&amp;#39;embedly-card&amp;#39;, EmbedlyCard)

 def register():
&lt;span class="gd"&gt;-    signals.content_object_init.connect(content_object_init)&lt;/span&gt;
&lt;span class="gi"&gt;+    signals.initialized.connect(content_object_init)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;書き換えたら、後は&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;python setup.py install
&lt;/pre&gt;&lt;/div&gt;
&lt;p&gt;で、インストール。 あとは、こんなふうに書くだけ。&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;.. embedly-card:: http://www.yahoo.co.jp
&lt;/pre&gt;&lt;/div&gt;
&lt;a class='embedly-card' data-card-chrome='0' href='http://www.yahoo.co.jp'&gt;&lt;/a&gt;
                &lt;script&gt;
                !function(a){
                    var b="embedly-platform",c="script";
                    if(!a.getElementById(b)){
                        var d=a.createElement(c);
                        d.id=b;
                        d.src=("https:"===document.location.protocol?"https":"http")+"://cdn.embedly.com/widgets/platform.js";
                        var e=document.getElementsByTagName(c)[0];e.parentNode.insertBefore(d,e)}
                    }(document);
                &lt;/script&gt;
                </content><category term="pelican"></category><category term="python"></category></entry></feed>